{"version":3,"file":"commonHelpers.js","sources":["../src/gallery_30.js"],"sourcesContent":["import axios from 'axios';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst form = document.querySelector(`#searchForm`);\nconst gallery = document.querySelector(`#gallery`);\nconst loadMoreImage = document.querySelector(`#loadMore`);\n\nlet query = ``;\nlet page = 1;\nlet perPage = 40;\n\nform.addEventListener(`submit`, async event => {\n  event.preventDefault();\n  query = document.querySelector('#searchQuery').value.trim();\n  page = 1;\n  gallery.innerHTML = ``;\n  loadMoreImage.style.display = `none`;\n  await fetchImages();\n});\n\nloadMoreImage.addEventListener(`click`, async () => {\n  page++;\n  await fetchImages();\n});\n\nasync function fetchImages() {\n  //const apiKey = '45239691-411c9704351f7c72c1a4b78aa';\n  // const apiUrl = `https://pixabay.com/api/?key=${apiKey}&q=${encodeURIComponent(\n  //   query\n  // )}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n\n  const apiKey = '45239691-411c9704351f7c72c1a4b78aa';\n  const params = {\n    key: apiKey,\n    q: query,\n    image_type: `photo`,\n    orientation: `horizontal`,\n    safesearch: `true`,\n    page: page,\n    per_page: perPage,\n  };\n  const apiUrl = `https://pixabay.com/api`;\n\n  try {\n    const response = await axios.get(apiUrl, { params });\n    const data = response.data;\n\n    if (data.hits.length > 0) {\n      displayImages(data.hits);\n      console.log(data.hits);\n      loadMoreImage.style.display = `block`;\n\n      if (page * perPage >= data.totalHits) {\n        loadMoreImage.style.display = `none`;\n        iziToast.info({\n          title: 'Informacja',\n          message: \"Were sorry, but you've reached the end of search results.\",\n          position: 'topRight',\n        });\n      } else {\n        loadMoreImage.style.display = `none`;\n        iziToast.info({\n          title: 'Informacja',\n          message: 'No images found. Please try a different search query.',\n          position: 'topRight',\n        });\n      }\n    }\n  } catch (error) {\n    iziToast.info({\n      title: 'Informacja',\n      message: 'Error fetching images:',\n      position: 'topRight',\n    });\n  }\n}\n\nfunction displayImages(images) {\n  const fragment = document.createDocumentFragment();\n\n  images.forEach(image => {\n    const imgElement = document.createElement('img');\n    imgElement.src = image.webformatURL;\n    imgElement.alt = image.tags;\n    fragment.appendChild(imgElement);\n  });\n\n  gallery.appendChild(fragment);\n  smoothScroll();\n  // images.forEach(image => {\n  //   const aElement = document.createElement('a');\n  //   aElement.href = image.largeImageURL;\n  //   aElement.dataset.lightbox = 'gallery';\n  //   aElement.dataset.title = image.tags;\n\n  //   const imgElement = document.createElement('img');\n  //   imgElement.src = image.webformatURL;\n  //   imgElement.alt = image.tags;\n\n  //   const infoDiv = document.createElement('div');\n  //   infoDiv.classList.add('image-info');\n  //   infoDiv.innerHTML = `\n  //           <div>\n  //               <span class=\"label\">Likes:</span>\n  //               <span>${image.likes}</span>\n  //           </div>\n  //           <div>\n  //               <span class=\"label\">Views:</span>\n  //               <span>${image.views}</span>\n  //           </div>\n  //           <div>\n  //               <span class=\"label\">Comments:</span>\n  //               <span>${image.comments}</span>\n  //           </div>\n  //           <div>\n  //               <span class=\"label\">Downloads:</span>\n  //               <span>${image.downloads}</span>\n  //           </div>\n  //       `;\n  //   gallery.appendChild(aElement);\n  //   aElement.appendChild(imgElement);\n  //   aElement.appendChild(infoDiv);\n  // });\n  // smoothScroll();\n}\nfunction smoothScroll() {\n  const firstImage = document.querySelector('#gallery img'); // UÅ¼yjemy #gallery zamiast .gallery\n  if (firstImage) {\n    const { height: cardHeight } = firstImage.getBoundingClientRect();\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n  }\n}\n"],"names":["form","gallery","loadMoreImage","query","page","perPage","event","fetchImages","params","apiUrl","data","axios","displayImages","iziToast","images","fragment","image","imgElement","smoothScroll","firstImage","cardHeight"],"mappings":"sGAQA,MAAMA,EAAO,SAAS,cAAc,aAAa,EAC3CC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAgB,SAAS,cAAc,WAAW,EAExD,IAAIC,EAAQ,GACRC,EAAO,EACPC,EAAU,GAEdL,EAAK,iBAAiB,SAAU,MAAMM,GAAS,CAC7CA,EAAM,eAAc,EACpBH,EAAQ,SAAS,cAAc,cAAc,EAAE,MAAM,OACrDC,EAAO,EACPH,EAAQ,UAAY,GACpBC,EAAc,MAAM,QAAU,OAC9B,MAAMK,EAAW,CACnB,CAAC,EAEDL,EAAc,iBAAiB,QAAS,SAAY,CAClDE,IACA,MAAMG,EAAW,CACnB,CAAC,EAED,eAAeA,GAAc,CAO3B,MAAMC,EAAS,CACb,IAFa,qCAGb,EAAGL,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,KAAMC,EACN,SAAUC,CACd,EACQI,EAAS,0BAEf,GAAI,CAEF,MAAMC,GADW,MAAMC,EAAM,IAAIF,EAAQ,CAAE,OAAAD,CAAM,CAAE,GAC7B,KAElBE,EAAK,KAAK,OAAS,IACrBE,EAAcF,EAAK,IAAI,EACvB,QAAQ,IAAIA,EAAK,IAAI,EACrBR,EAAc,MAAM,QAAU,QAE1BE,EAAOC,GAAWK,EAAK,WACzBR,EAAc,MAAM,QAAU,OAC9BW,EAAS,KAAK,CACZ,MAAO,aACP,QAAS,4DACT,SAAU,UACpB,CAAS,IAEDX,EAAc,MAAM,QAAU,OAC9BW,EAAS,KAAK,CACZ,MAAO,aACP,QAAS,wDACT,SAAU,UACpB,CAAS,GAGN,MAAe,CACdA,EAAS,KAAK,CACZ,MAAO,aACP,QAAS,yBACT,SAAU,UAChB,CAAK,CACF,CACH,CAEA,SAASD,EAAcE,EAAQ,CAC7B,MAAMC,EAAW,SAAS,yBAE1BD,EAAO,QAAQE,GAAS,CACtB,MAAMC,EAAa,SAAS,cAAc,KAAK,EAC/CA,EAAW,IAAMD,EAAM,aACvBC,EAAW,IAAMD,EAAM,KACvBD,EAAS,YAAYE,CAAU,CACnC,CAAG,EAEDhB,EAAQ,YAAYc,CAAQ,EAC5BG,GAoCF,CACA,SAASA,GAAe,CACtB,MAAMC,EAAa,SAAS,cAAc,cAAc,EACxD,GAAIA,EAAY,CACd,KAAM,CAAE,OAAQC,CAAY,EAAGD,EAAW,sBAAqB,EAC/D,OAAO,SAAS,CACd,IAAKC,EAAa,EAClB,SAAU,QAChB,CAAK,CACF,CACH"}