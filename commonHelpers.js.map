{"version":3,"file":"commonHelpers.js","sources":["../src/gallery_30.js"],"sourcesContent":["import axios from 'axios';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst form = document.querySelector(`#searchForm`);\nconst gallery = document.querySelector(`#gallery`);\nconst loadMoreImage = document.querySelector(`#loadMore`);\nconst loader = document.querySelector(`#loader`);\nlet query = ``;\nlet page = 1;\nlet perPage = 40;\n\nform.addEventListener(`submit`, async event => {\n  event.preventDefault();\n  query = document.querySelector('#searchQuery').value.trim();\n  page = 1;\n  gallery.innerHTML = ``;\n  loadMoreImage.style.display = `none`;\n  await fetchImages();\n});\n\nloadMoreImage.addEventListener(`click`, async () => {\n  page += 1;\n  loader.style.display = `none`;\n  await fetchImages();\n});\n\nasync function fetchImages() {\n  const apiKey = '45239691-411c9704351f7c72c1a4b78aa';\n  const apiUrl = `https://pixabay.com/api/?key=${apiKey}&q=${encodeURIComponent(\n    query\n  )}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n\n  loader.style.display = 'flex';\n\n  try {\n    const response = await axios.get(apiUrl);\n    const data = response.data;\n    console.log(data);\n\n    if (data.hits.length > 0) {\n      loader.style.display = 'none';\n      displayImages(data.hits);\n      console.log(data.hits);\n      loadMoreImage.style.display = ``;\n\n      if (page * perPage >= data.totalHits) {\n        loadMoreImage.style.display = `none`;\n        iziToast.info({\n          title: 'Informacja',\n          message: \"Were sorry, but you've reached the end of search results.\",\n          position: 'topRight',\n        });\n      }\n    } else {\n      loadMoreImage.style.display = `none`;\n      iziToast.info({\n        title: 'Informacja',\n        message: 'No images found. Please try a different search query.',\n        position: 'topRight',\n      });\n    }\n  } catch (error) {\n    iziToast.info({\n      title: 'Error',\n      message: 'Error fetching images:',\n      position: 'topRight',\n      color: 'red',\n    });\n  }\n}\n\nfunction displayImages(images) {\n  images.forEach(image => {\n    const aElement = document.createElement('a');\n    aElement.href = image.largeImageURL;\n    aElement.dataset.lightbox = 'gallery';\n    aElement.dataset.title = image.tags;\n\n    const imgElement = document.createElement('img');\n    imgElement.src = image.webformatURL;\n    imgElement.alt = image.tags;\n\n    const infoDiv = document.createElement('div');\n    infoDiv.classList.add('image-info');\n    infoDiv.innerHTML = `\n            <div>\n                <span class=\"label\">Likes:</span>\n                <span>${image.likes}</span>\n            </div>\n            <div>\n                <span class=\"label\">Views:</span>\n                <span>${image.views}</span>\n            </div>\n            <div>\n                <span class=\"label\">Comments:</span>\n                <span>${image.comments}</span>\n            </div>\n            <div>\n                <span class=\"label\">Downloads:</span>\n                <span>${image.downloads}</span>\n            </div>`;\n    gallery.appendChild(aElement);\n    aElement.appendChild(imgElement);\n    aElement.appendChild(infoDiv);\n  });\n  smoothScroll();\n  const lightbox = new SimpleLightbox('#gallery a', {});\n  lightbox.refresh();\n}\nfunction smoothScroll() {\n  const firstImage = document.querySelector('#gallery img');\n  if (firstImage) {\n    const { height: cardHeight } = firstImage.getBoundingClientRect();\n    window.scrollBy({\n      top: cardHeight * 3,\n      behavior: 'smooth',\n    });\n  }\n}\n"],"names":["form","gallery","loadMoreImage","loader","query","page","perPage","event","fetchImages","apiUrl","data","axios","displayImages","iziToast","images","image","aElement","imgElement","infoDiv","smoothScroll","SimpleLightbox","firstImage","cardHeight"],"mappings":"kHAQA,MAAMA,EAAO,SAAS,cAAc,aAAa,EAC3CC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAgB,SAAS,cAAc,WAAW,EAClDC,EAAS,SAAS,cAAc,SAAS,EAC/C,IAAIC,EAAQ,GACRC,EAAO,EACPC,EAAU,GAEdN,EAAK,iBAAiB,SAAU,MAAMO,GAAS,CAC7CA,EAAM,eAAc,EACpBH,EAAQ,SAAS,cAAc,cAAc,EAAE,MAAM,OACrDC,EAAO,EACPJ,EAAQ,UAAY,GACpBC,EAAc,MAAM,QAAU,OAC9B,MAAMM,EAAW,CACnB,CAAC,EAEDN,EAAc,iBAAiB,QAAS,SAAY,CAClDG,GAAQ,EACRF,EAAO,MAAM,QAAU,OACvB,MAAMK,EAAW,CACnB,CAAC,EAED,eAAeA,GAAc,CAE3B,MAAMC,EAAS,qEAA4C,mBACzDL,CACD,CAAA,iEAAiEC,CAAI,aAAaC,CAAO,GAE1FH,EAAO,MAAM,QAAU,OAEvB,GAAI,CAEF,MAAMO,GADW,MAAMC,EAAM,IAAIF,CAAM,GACjB,KACtB,QAAQ,IAAIC,CAAI,EAEZA,EAAK,KAAK,OAAS,GACrBP,EAAO,MAAM,QAAU,OACvBS,EAAcF,EAAK,IAAI,EACvB,QAAQ,IAAIA,EAAK,IAAI,EACrBR,EAAc,MAAM,QAAU,GAE1BG,EAAOC,GAAWI,EAAK,YACzBR,EAAc,MAAM,QAAU,OAC9BW,EAAS,KAAK,CACZ,MAAO,aACP,QAAS,4DACT,SAAU,UACpB,CAAS,KAGHX,EAAc,MAAM,QAAU,OAC9BW,EAAS,KAAK,CACZ,MAAO,aACP,QAAS,wDACT,SAAU,UAClB,CAAO,EAEJ,MAAe,CACdA,EAAS,KAAK,CACZ,MAAO,QACP,QAAS,yBACT,SAAU,WACV,MAAO,KACb,CAAK,CACF,CACH,CAEA,SAASD,EAAcE,EAAQ,CAC7BA,EAAO,QAAQC,GAAS,CACtB,MAAMC,EAAW,SAAS,cAAc,GAAG,EAC3CA,EAAS,KAAOD,EAAM,cACtBC,EAAS,QAAQ,SAAW,UAC5BA,EAAS,QAAQ,MAAQD,EAAM,KAE/B,MAAME,EAAa,SAAS,cAAc,KAAK,EAC/CA,EAAW,IAAMF,EAAM,aACvBE,EAAW,IAAMF,EAAM,KAEvB,MAAMG,EAAU,SAAS,cAAc,KAAK,EAC5CA,EAAQ,UAAU,IAAI,YAAY,EAClCA,EAAQ,UAAY;AAAA;AAAA;AAAA,wBAGAH,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,wBAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,wBAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,wBAIdA,EAAM,SAAS;AAAA,oBAEnCd,EAAQ,YAAYe,CAAQ,EAC5BA,EAAS,YAAYC,CAAU,EAC/BD,EAAS,YAAYE,CAAO,CAChC,CAAG,EACDC,IACiB,IAAIC,EAAe,aAAc,CAAE,CAAA,EAC3C,QAAO,CAClB,CACA,SAASD,GAAe,CACtB,MAAME,EAAa,SAAS,cAAc,cAAc,EACxD,GAAIA,EAAY,CACd,KAAM,CAAE,OAAQC,CAAY,EAAGD,EAAW,sBAAqB,EAC/D,OAAO,SAAS,CACd,IAAKC,EAAa,EAClB,SAAU,QAChB,CAAK,CACF,CACH"}